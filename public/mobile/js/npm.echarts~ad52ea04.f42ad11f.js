(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["npm.echarts~ad52ea04"],{"10e8":function(t,e,a){"use strict";a.d(e,"a",(function(){return Q}));var n=a("9ab4"),o=a("cbe5"),i=a("48a9"),r=a("c7a2"),l=a("2306"),u=a("7d6c"),s=a("e887"),c=a("7837"),d=a("861c"),y=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t}(),g=function(t){function e(e){return t.call(this,e)||this}return Object(n["b"])(e,t),e.prototype.getDefaultShape=function(){return new y},e.prototype.buildPath=function(t,e){var a=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+a,e.y2),t.bezierCurveTo(e.cpx2+a,e.cpy2,e.cpx1+a,e.cpy1,e.x1+a,e.y1)):(t.lineTo(e.x2,e.y2+a),t.bezierCurveTo(e.cpx2,e.cpy2+a,e.cpx1,e.cpy1+a,e.x1,e.y1+a)),t.closePath()},e.prototype.highlight=function(){Object(u["n"])(this)},e.prototype.downplay=function(){Object(u["w"])(this)},e}(o["b"]),h=function(t){function e(){var a=null!==t&&t.apply(this,arguments)||this;return a.type=e.type,a._focusAdjacencyDisabled=!1,a}return Object(n["b"])(e,t),e.prototype.render=function(t,e,a){var n=this,o=t.getGraph(),l=this.group,s=t.layoutInfo,y=s.width,h=s.height,f=t.getData(),v=t.getData("edge"),x=t.get("orient");this._model=t,l.removeAll(),l.x=s.x,l.y=s.y,o.eachEdge((function(e){var a=new g,n=Object(d["a"])(a);n.dataIndex=e.dataIndex,n.seriesIndex=t.seriesIndex,n.dataType="edge";var o,r,s,c,p,f,L,b,m=e.getModel(),k=m.getModel("lineStyle"),w=k.get("curveness"),I=e.node1.getLayout(),E=e.node1.getModel(),j=E.get("localX"),M=E.get("localY"),D=e.node2.getLayout(),V=e.node2.getModel(),O=V.get("localX"),S=V.get("localY"),N=e.getLayout();switch(a.shape.extent=Math.max(1,N.dy),a.shape.orient=x,"vertical"===x?(o=(null!=j?j*y:I.x)+N.sy,r=(null!=M?M*h:I.y)+I.dy,s=(null!=O?O*y:D.x)+N.ty,c=null!=S?S*h:D.y,p=o,f=r*(1-w)+c*w,L=s,b=r*w+c*(1-w)):(o=(null!=j?j*y:I.x)+I.dx,r=(null!=M?M*h:I.y)+N.sy,s=null!=O?O*y:D.x,c=(null!=S?S*h:D.y)+N.ty,p=o*(1-w)+s*w,f=r,L=o*w+s*(1-w),b=c),a.setShape({x1:o,y1:r,x2:s,y2:c,cpx1:p,cpy1:f,cpx2:L,cpy2:b}),a.useStyle(k.getItemStyle()),a.style.fill){case"source":a.style.fill=e.node1.getVisual("color"),a.style.decal=e.node1.getVisual("style").decal;break;case"target":a.style.fill=e.node2.getVisual("color"),a.style.decal=e.node2.getVisual("style").decal;break;case"gradient":var G=e.node1.getVisual("color"),T=e.node2.getVisual("color");"string"===typeof G&&"string"===typeof T&&(a.style.fill=new i["a"](0,0,1,0,[{color:G,offset:0},{color:T,offset:1}]))}var A=m.getModel("emphasis");Object(u["D"])(a,m,"lineStyle",(function(t){return t.getItemStyle()})),l.add(a),v.setItemGraphicEl(e.dataIndex,a);var P=A.get("focus");Object(u["k"])(a,"adjacency"===P?e.getAdjacentDataIndices():P,A.get("blurScope")),Object(d["a"])(a).dataType="edge"})),o.eachNode((function(e){var a=e.getLayout(),n=e.getModel(),o=n.get("localX"),i=n.get("localY"),s=n.getModel("emphasis"),g=new r["a"]({shape:{x:null!=o?o*y:a.x,y:null!=i?i*h:a.y,width:a.dx,height:a.dy},style:n.getModel("itemStyle").getItemStyle()});Object(c["g"])(g,Object(c["e"])(n),{labelFetcher:t,labelDataIndex:e.dataIndex,defaultText:e.id}),g.disableLabelAnimation=!0,g.setStyle("fill",e.getVisual("color")),g.setStyle("decal",e.getVisual("style").decal),Object(u["D"])(g,n),l.add(g),f.setItemGraphicEl(e.dataIndex,g),Object(d["a"])(g).dataType="node";var p=s.get("focus");Object(u["k"])(g,"adjacency"===p?e.getAdjacentDataIndices():p,s.get("blurScope"))})),f.eachItemGraphicEl((function(e,o){var i=f.getItemModel(o);i.get("draggable")&&(e.drift=function(e,i){n._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=i,this.dirty(),a.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:f.getRawIndex(o),localX:this.shape.x/y,localY:this.shape.y/h})},e.ondragend=function(){n._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move")})),!this._data&&t.isAnimationEnabled()&&l.setClipPath(p(l.getBoundingRect(),t,(function(){l.removeClipPath()}))),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(s["a"]);function p(t,e,a){var n=new r["a"]({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return l["initProps"](n,{shape:{width:t.width+20}},e,a),n}var f=h,v=a("4f85"),x=a("237f"),L=a("4319"),b=a("217c"),m=function(t){function e(){var a=null!==t&&t.apply(this,arguments)||this;return a.type=e.type,a}return Object(n["b"])(e,t),e.prototype.getInitialData=function(t,e){var a=t.edges||t.links,n=t.data||t.nodes,o=t.levels;this.levelModels=[];for(var i=this.levelModels,r=0;r<o.length;r++)null!=o[r].depth&&o[r].depth>=0&&(i[o[r].depth]=new L["a"](o[r],this,e));if(n&&a){var l=Object(x["a"])(n,a,this,!0,u);return l.data}function u(t,e){t.wrapMethod("getItemModel",(function(t,e){var a=t.parentModel,n=a.getData().getItemLayout(e);if(n){var o=n.depth,i=a.levelModels[o];i&&(t.parentModel=i)}return t})),e.wrapMethod("getItemModel",(function(t,e){var a=t.parentModel,n=a.getGraph().getEdgeByIndex(e),o=n.node1.getLayout();if(o){var i=o.depth,r=a.levelModels[i];r&&(t.parentModel=r)}return t}))}},e.prototype.setNodePosition=function(t,e){var a=this.option.data[t];a.localX=e[0],a.localY=e[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,e,a){function n(t){return isNaN(t)||null==t}if("edge"===a){var o=this.getDataParams(t,a),i=o.data,r=o.value,l=i.source+" -- "+i.target;return Object(b["c"])("nameValue",{name:l,value:r,noValue:n(r)})}var u=this.getGraph().getNodeByIndex(t),s=u.getLayout().value,c=this.getDataParams(t,a).data.name;return Object(b["c"])("nameValue",{name:null!=c?c+"":null,value:s,noValue:n(s)})},e.prototype.optionUpdated=function(){this.option},e.prototype.getDataParams=function(e,a){var n=t.prototype.getDataParams.call(this,e,a);if(null==n.value&&"node"===a){var o=this.getGraph().getNodeByIndex(e),i=o.getLayout().value;n.value=i}return n},e.type="series.sankey",e.defaultOption={zlevel:0,z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(v["a"]),k=m,w=a("f934"),I=a("6d8b"),E=a("e0d3");function j(t,e){t.eachSeriesByType("sankey",(function(t){var a=t.get("nodeWidth"),n=t.get("nodeGap"),o=M(t,e);t.layoutInfo=o;var i=o.width,r=o.height,l=t.getGraph(),u=l.nodes,s=l.edges;V(u);var c=I["n"](u,(function(t){return 0===t.getLayout().value})),d=0!==c.length?0:t.get("layoutIterations"),y=t.get("orient"),g=t.get("nodeAlign");D(u,s,a,n,i,r,d,y,g)}))}function M(t,e){return w["g"](t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function D(t,e,a,n,o,i,r,l,u){O(t,e,a,o,i,l,u),A(t,e,i,o,n,r,l),F(t,l)}function V(t){I["k"](t,(function(t){var e=J(t.outEdges,W),a=J(t.inEdges,W),n=t.getValue()||0,o=Math.max(e,a,n);t.setLayout({value:o},!0)}))}function O(t,e,a,n,o,i,r){for(var l=[],u=[],s=[],c=[],d=0,y=0;y<e.length;y++)l[y]=1;for(y=0;y<t.length;y++)u[y]=t[y].inEdges.length,0===u[y]&&s.push(t[y]);var g=-1;while(s.length){for(var h=0;h<s.length;h++){var p=s[h],f=p.hostGraph.data.getRawDataItem(p.dataIndex),v=null!=f.depth&&f.depth>=0;v&&f.depth>g&&(g=f.depth),p.setLayout({depth:v?f.depth:d},!0),"vertical"===i?p.setLayout({dy:a},!0):p.setLayout({dx:a},!0);for(var x=0;x<p.outEdges.length;x++){var L=p.outEdges[x],b=e.indexOf(L);l[b]=0;var m=L.node2,k=t.indexOf(m);0===--u[k]&&c.indexOf(m)<0&&c.push(m)}}++d,s=c,c=[]}for(y=0;y<l.length;y++)if(1===l[y])throw new Error("Sankey is a DAG, the original data has cycle!");var w=g>d-1?g:d-1;r&&"left"!==r&&N(t,r,i,w);var I="vertical"===i?(o-a)/w:(n-a)/w;T(t,I,i)}function S(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&e.depth>=0}function N(t,e,a,n){if("right"===e){var o=[],i=t,r=0;while(i.length){for(var l=0;l<i.length;l++){var u=i[l];u.setLayout({skNodeHeight:r},!0);for(var s=0;s<u.inEdges.length;s++){var c=u.inEdges[s];o.indexOf(c.node1)<0&&o.push(c.node1)}}i=o,o=[],++r}I["k"](t,(function(t){S(t)||t.setLayout({depth:Math.max(0,n-t.getLayout().skNodeHeight)},!0)}))}else"justify"===e&&G(t,n)}function G(t,e){I["k"](t,(function(t){S(t)||t.outEdges.length||t.setLayout({depth:e},!0)}))}function T(t,e,a){I["k"](t,(function(t){var n=t.getLayout().depth*e;"vertical"===a?t.setLayout({y:n},!0):t.setLayout({x:n},!0)}))}function A(t,e,a,n,o,i,r){var l=P(t,r);C(l,e,a,n,o,r),z(l,o,a,n,r);for(var u=1;i>0;i--)u*=.99,B(l,u,r),z(l,o,a,n,r),q(l,u,r),z(l,o,a,n,r)}function P(t,e){var a=[],n="vertical"===e?"y":"x",o=Object(E["j"])(t,(function(t){return t.getLayout()[n]}));return o.keys.sort((function(t,e){return t-e})),I["k"](o.keys,(function(t){a.push(o.buckets.get(t))})),a}function C(t,e,a,n,o,i){var r=1/0;I["k"](t,(function(t){var e=t.length,l=0;I["k"](t,(function(t){l+=t.getLayout().value}));var u="vertical"===i?(n-(e-1)*o)/l:(a-(e-1)*o)/l;u<r&&(r=u)})),I["k"](t,(function(t){I["k"](t,(function(t,e){var a=t.getLayout().value*r;"vertical"===i?(t.setLayout({x:e},!0),t.setLayout({dx:a},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:a},!0))}))})),I["k"](e,(function(t){var e=+t.getValue()*r;t.setLayout({dy:e},!0)}))}function z(t,e,a,n,o){var i="vertical"===o?"x":"y";I["k"](t,(function(t){var r,l,u;t.sort((function(t,e){return t.getLayout()[i]-e.getLayout()[i]}));for(var s=0,c=t.length,d="vertical"===o?"dx":"dy",y=0;y<c;y++)l=t[y],u=s-l.getLayout()[i],u>0&&(r=l.getLayout()[i]+u,"vertical"===o?l.setLayout({x:r},!0):l.setLayout({y:r},!0)),s=l.getLayout()[i]+l.getLayout()[d]+e;var g="vertical"===o?n:a;if(u=s-e-g,u>0){r=l.getLayout()[i]-u,"vertical"===o?l.setLayout({x:r},!0):l.setLayout({y:r},!0),s=r;for(y=c-2;y>=0;--y)l=t[y],u=l.getLayout()[i]+l.getLayout()[d]+e-s,u>0&&(r=l.getLayout()[i]-u,"vertical"===o?l.setLayout({x:r},!0):l.setLayout({y:r},!0)),s=l.getLayout()[i]}}))}function B(t,e,a){I["k"](t.slice().reverse(),(function(t){I["k"](t,(function(t){if(t.outEdges.length){var n=J(t.outEdges,X,a)/J(t.outEdges,W);if(isNaN(n)){var o=t.outEdges.length;n=o?J(t.outEdges,Y,a)/o:0}if("vertical"===a){var i=t.getLayout().x+(n-H(t,a))*e;t.setLayout({x:i},!0)}else{var r=t.getLayout().y+(n-H(t,a))*e;t.setLayout({y:r},!0)}}}))}))}function X(t,e){return H(t.node2,e)*t.getValue()}function Y(t,e){return H(t.node2,e)}function _(t,e){return H(t.node1,e)*t.getValue()}function R(t,e){return H(t.node1,e)}function H(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function W(t){return t.getValue()}function J(t,e,a){var n=0,o=t.length,i=-1;while(++i<o){var r=+e(t[i],a);isNaN(r)||(n+=r)}return n}function q(t,e,a){I["k"](t,(function(t){I["k"](t,(function(t){if(t.inEdges.length){var n=J(t.inEdges,_,a)/J(t.inEdges,W);if(isNaN(n)){var o=t.inEdges.length;n=o?J(t.inEdges,R,a)/o:0}if("vertical"===a){var i=t.getLayout().x+(n-H(t,a))*e;t.setLayout({x:i},!0)}else{var r=t.getLayout().y+(n-H(t,a))*e;t.setLayout({y:r},!0)}}}))}))}function F(t,e){var a="vertical"===e?"x":"y";I["k"](t,(function(t){t.outEdges.sort((function(t,e){return t.node2.getLayout()[a]-e.node2.getLayout()[a]})),t.inEdges.sort((function(t,e){return t.node1.getLayout()[a]-e.node1.getLayout()[a]}))})),I["k"](t,(function(t){var e=0,a=0;I["k"](t.outEdges,(function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy})),I["k"](t.inEdges,(function(t){t.setLayout({ty:a},!0),a+=t.getLayout().dy}))}))}var U=a("5f14");function K(t){t.eachSeriesByType("sankey",(function(t){var e=t.getGraph(),a=e.nodes;if(a.length){var n=1/0,o=-1/0;I["k"](a,(function(t){var e=t.getLayout().value;e<n&&(n=e),e>o&&(o=e)})),I["k"](a,(function(e){var a=new U["a"]({type:"color",mappingMethod:"linear",dataExtent:[n,o],visual:t.get("color")}),i=a.mapValueToVisual(e.getLayout().value),r=e.getModel().get(["itemStyle","color"]);null!=r?(e.setVisual("color",r),e.setVisual("style",{fill:r})):(e.setVisual("color",i),e.setVisual("style",{fill:i}))}))}}))}function Q(t){t.registerChartView(f),t.registerSeriesModel(k),t.registerLayout(j),t.registerVisual(K),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},(function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])}))}))}}}]);