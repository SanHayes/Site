(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33cd363c"],{"0621":function(t,e,i){},d104:function(t,e,i){"use strict";i("0621")},f54f:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap",staticStyle:{padding:"20px",background:"#FFFFFF"}},[i("div",{staticClass:"flex alcenter",staticStyle:{height:"50px"}},[i("div",{staticClass:"flex1 flex",staticStyle:{"padding-right":"15px","justify-content":"flex-end"}},[i("svg",{staticClass:"icon",staticStyle:{"font-size":"24px"},attrs:{color:"#999","aria-hidden":"true"},on:{click:function(e){return t.$router.back(-1)}}},[i("use",{attrs:{"xlink:href":"#icon-guanbi"}})])])]),i("mu-container",[i("h1",{staticStyle:{"line-height":"50px",margin:"0","margin-bottom":"30px"},attrs:{align:"left"}},[t._v(" "+t._s(t.$t("pass6"))+" ")]),t.stepOne?i("mu-form",{ref:"form",staticClass:"mu-demo-form",attrs:{model:t.validateForm}},[i("mu-form-item",{attrs:{label:t.$t("pass4"),prop:"old_password"}},[i("mu-text-field",{attrs:{type:"password",prop:"old_password"},model:{value:t.validateForm.old_password,callback:function(e){t.$set(t.validateForm,"old_password",e)},expression:"validateForm.old_password"}})],1),i("mu-form-item",{attrs:{label:t.$t("lpwd.newpwd"),prop:"withdraw_password"}},[i("mu-text-field",{attrs:{"action-icon":t.visibilitylog?":icon-kejian":":icon-bianzubeifenx","action-click":function(){return t.visibilitylog=!t.visibilitylog},type:t.visibilitylog?"text":"password",prop:"withdraw_password"},model:{value:t.validateForm.withdraw_password,callback:function(e){t.$set(t.validateForm,"withdraw_password",e)},expression:"validateForm.withdraw_password"}})],1),i("mu-form-item",{attrs:{label:t.$t("register.repwd"),prop:"withdraw_password_confirm"}},[i("mu-text-field",{attrs:{"action-icon":t.visibilityre?":icon-kejian":":icon-bianzubeifenx","action-click":function(){return t.visibilityre=!t.visibilityre},type:t.visibilityre?"text":"password",prop:"withdraw_password_confirm"},model:{value:t.validateForm.withdraw_password_confirm,callback:function(e){t.$set(t.validateForm,"withdraw_password_confirm",e)},expression:"validateForm.withdraw_password_confirm"}})],1),i("mu-button",{staticStyle:{width:"100%",height:"40px"},attrs:{color:"primary",disabled:t.disabled},on:{click:t.submit}},[t._v(t._s(t.$t("pass6"))+" ")])],1):t._e(),t.stepTwo?i("mu-form",{ref:"form",staticClass:"mu-demo-form",attrs:{model:t.validateForm}},[i("mu-form-item",{attrs:{label:t.$t("register.repwd"),prop:"repwd"}},[i("mu-text-field",{attrs:{"action-icon":t.visibilityre?":icon-kejian":":icon-bianzubeifenx","action-click":function(){return t.visibilityre=!t.visibilityre},type:t.visibilityre?"text":"password",prop:"repwd"},model:{value:t.validateForm.repwd,callback:function(e){t.$set(t.validateForm,"repwd",e)},expression:"validateForm.repwd"}})],1),i("mu-form-item",{attrs:{label:t.$t("lpwd.newpwd"),prop:"logpwd"}},[i("mu-text-field",{attrs:{"action-icon":t.visibilitylog?":icon-kejian":":icon-bianzubeifenx","action-click":function(){return t.visibilitylog=!t.visibilitylog},type:t.visibilitylog?"text":"password",prop:"logpwd"},model:{value:t.validateForm.logpwd,callback:function(e){t.$set(t.validateForm,"logpwd",e)},expression:"validateForm.logpwd"}})],1),i("mu-button",{staticStyle:{width:"100%",height:"40px"},attrs:{color:"primary",disabled:0===t.validateForm.email.length||0===t.validateForm.code.length||!t.canNext},on:{click:t.reset}},[t._v(t._s(t.$t("lpwd.spwd"))+" ")]),i("div",{staticClass:"flex",staticStyle:{height:"50px"}},[i("span",{staticClass:"flex1 flex alcenter",on:{click:function(e){return t.$router.push("/login")}}},[t._v(t._s(t.$t("register.gologin")))])])],1):t._e()],1)],1)},s=[],o=i("797a"),r={data:function(){return{usernameRules:[{validate:function(t){return!!t},message:"必须填写用户名"},{validate:function(t){return t.length>=3},message:"用户名长度大于3"}],passwordRules:[{validate:function(t){return!!t},message:"必须填写密码"},{validate:function(t){return t.length>=3&&t.length<=10},message:"密码长度大于3小于10"}],visibility:!1,argeeRules:[{validate:function(t){return!!t},message:"必须同意用户协议"}],validateForm:{password1:"",withdraw_password:"",email:"",code:"",isAgree:!1,country:"China",logpwd:"",repwd:"",invitecode:"",old_password:"",withdraw_password_confirm:""},loadingSend:!1,isSending:!1,seconds:60,country:o["a"],canNext:!1,stepOne:!0,stepTwo:!1,visibilitylog:!1,visibilityre:!1,accountValid:!1}},computed:{disabled:function(){var t=this.validateForm,e=t.old_password,i=t.withdraw_password,a=t.withdraw_password_confirm;return!e||!i||!a}},beforeCreate:function(){},mounted:function(){},methods:{submit:function(){var t=this,e=this.validateForm,i=e.old_password,a=e.withdraw_password_confirm,s=e.withdraw_password;s.length<6||s.length>16?this.$toast.fail(this.$t("lay.pwdlength")):a===s?this.$http({url:"/api/set_withdraw_password",method:"post",headers:{Authorization:localStorage.getItem("token")},data:{withdraw_password:s,old_password:i,withdraw_password_confirm:a}}).then((function(e){e.data.type,t.$toast(e.data.message)})):this.$toast.fail(this.$t("lay.twopwd"))},clear:function(){this.$refs.form.clear(),this.validateForm={email:"",password:"",isAgree:!1}},userInfo:function(){this.$http({url:"/api/user/info",method:"get",data:{},headers:{Authorization:localStorage.getItem("token")}}).then((function(t){"ok"===t.data.type&&(localStorage.setItem("user_id",t.data.message.id),localStorage.setItem("extension_code",t.data.message.extension_code),localStorage.setItem("is_seller",t.data.message.is_seller),eventBus.$emit("seller",t.data.message.is_seller))})).catch((function(t){}))},reset:function(){var t=this.$loading(),e=this;this.$http({url:"/api/user/forget",method:"post",data:{account:this.validateForm.email,password:this.validateForm.logpwd,repassword:this.validateForm.repwd,code:this.validateForm.code}}).then((function(i){t.close(),"ok"===i.data.type?(e.$toast.success(e.$t("legal.finished")),["token","user_id"].forEach((function(t){localStorage.removeItem(t)})),setTimeout((function(){e.$router.push("/login")}),2e3)):e.$toast.success(i.data.message)}))},sendCode:function(){var t=this,e="sms_mail",i=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(i.test(this.validateForm.email)){this.loadingSend=!0;var a={user_string:this.validateForm.email,type:"forget"};a.lang=window.localStorage.getItem("lang"),this.$http({url:"/api/"+e,method:"post",data:a,headers:{not_loading:!0}}).then((function(e){if(t.loadingSend=!1,t.isSending=!0,"error"!==e.data.type){t.$toast.success(e.data.message),t.canNext=!0;var i=setInterval((function(e){t.seconds--,0===t.seconds&&(t.seconds=60,clearInterval(i),t.isSending=!1)}),1e3)}else t.isSending=!1,t.$toast.fail(e.data.message)}))}else this.$toast.fail(this.$t("register.emailnum"))}}},l=r,n=(i("d104"),i("2877")),d=Object(n["a"])(l,a,s,!1,null,"be9363ba",null);e["default"]=d.exports}}]);