(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ca8da59"],{"69aa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[a("mu-container",[e._e(),a("mu-appbar",{staticStyle:{width:"100%"},attrs:{color:"#fff","text-color":"#000"}},[e._v(" "+e._s(e.$t("account.transfer"))+" "),a("mu-button",{attrs:{slot:"left",icon:"",flat:""},on:{click:function(t){return e.$router.back(-1)}},slot:"left"},[a("mu-icon",{attrs:{value:":icon-fanhui4"}})],1),a("mu-button",{attrs:{slot:"right",icon:"",flat:""},slot:"right"})],1),a("div",{staticStyle:{padding:"20px"},attrs:{id:"ssssd"}},[a("mu-select",{attrs:{label:e.$t("account.choosecoin"),"full-width":""},model:{value:e.coinIndex,callback:function(t){e.coinIndex=t},expression:"coinIndex"}},e._l(e.coins,(function(e,t){return a("mu-option",{key:t,attrs:{label:e.currency_name,value:t}})})),1),a("mu-select",{attrs:{label:e.$t("from"),"full-width":"",placeholder:e.$t("transfer.select")},on:{change:e.selectOne},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.accountList,(function(e,t){return a("mu-option",{key:t,attrs:{label:e.texts,value:e.type}})})),1),a("mu-select",{attrs:{label:e.$t("to"),"full-width":"",placeholder:e.$t("transfer.select")},on:{change:e.selectOne},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},e._l(e.accountList,(function(e,t){return a("mu-option",{key:t,attrs:{label:e.texts,value:e.type}})})),1),a("mu-text-field",{attrs:{"full-width":"",suffix:e.coins[e.coinIndex].currency_name,label:e.$t("account.huanum")},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}},[a("span",{staticClass:"subtitle",staticStyle:{"margin-left":"10px","border-left":"1px solid #888","padding-left":"10px"},attrs:{slot:"append",color:"primary"},on:{click:function(t){e.number=e.transferBalance}},slot:"append"},[e._v(e._s(e.$t("lever.all"))+" ")])]),a("div",{staticClass:"flex ft14"},[e._v(e._s(e.$t("center.available"))+"："),a("span",{staticClass:"green"},[e._v(e._s(e.transferBalance))])]),a("mu-button",{staticStyle:{"margin-top":"10px",background:"linear-gradient(to right, #218adc , #55c2ff)"},attrs:{slot:"append","full-width":"",color:"primary"},on:{click:e.transfer},slot:"append"},[e._v(e._s(e.$t("account.transfer"))+" ")])],1)],1)],1)},c=[],l=(a("159b"),!1),i=!1,r={name:"Transfer",data:function(){return{token:"",selectedCoin:{name:"",id:""},coins:[],coinIndex:"",types:[this.$t("usercenter.lever"),this.$t("usercenter.change")],number:"",selectedFrom:"合约账户",selectedTo:"资产账户",currencyList:[],accountList:[],value1:"change",value2:"lever",transferBalance:0}},mounted:function(){this.getCoins(),this.initCurrencyList()},watch:{value1:{handler:function(e){l&&this.computeBalance()},deep:!0,immediate:!1},value2:{handler:function(e){},deep:!0,immediate:!1},coinIndex:{handler:function(e){i&&this.computeBalance()},deep:!0,immediate:!1}},methods:{getCoins:function(){var e=this;this.token=window.localStorage.getItem("token")||"",this.$http({url:"/api/wallet/list",method:"post",headers:{Authorization:this.token}}).then((function(t){if("ok"==t.data.type){var a=[{},{},{},{},t.data.message.lever_wallet,t.data.message.micro_wallet,t.data.message.legal_wallet,t.data.message.change_wallet],n=a[0],c=a[1],i=a[2],r=a[3],s=a[4],o=a[5],u=a[6],f=a[7];s.balance.forEach((function(e){n[e.currency_name]=e.lever_balance})),o.balance.forEach((function(e){c[e.currency_name]=e.micro_balance})),u.balance.forEach((function(e){r[e.currency_name]=e.legal_balance})),f.balance.forEach((function(e){i[e.currency_name]=e.change_balance}));for(var h=u.balance,d=h.length-1;d>=0;d--){var m=h[d];h[d].lever_balance=n[m.currency_name],h[d].micro_balance=c[m.currency_name],h[d].change_balance=i[m.currency_name],h[d].legal_balance=r[m.currency_name]}e.coins=h,e.coinIndex=0,setTimeout((function(){e.value1="change",e.value2="lever"}),100),l=!0}}))},transfer:function(){var e=this;if(""!=this.number){var t={};t.number=this.number;this.coins[this.coinIndex];if(t.from_field=this.value1,t.to_field=this.value2,t.from_field!==t.to_field){t.currency_id=this.coins[this.coinIndex].currency;var a=this.$loading();this.$http({url:"/api/wallet/change",method:"post",data:t,headers:{Authorization:localStorage.getItem("token")}}).then((function(t){a.close(),"ok"==t.data.type?(e.$toast.success(e.$t("transfer.ok")),setTimeout((function(){e.getCoins(),e.initCurrencyList()}),1e3)):e.$toast.fail(t.data.message)}))}else this.$toast.fail(this.$t("transfer.same"))}else this.$toast.fail(this.$t("account.huanum"))},initCurrencyList:function(){var e=localStorage.getItem("token"),t=this;this.$http({url:"/api/currency/user_currency_list",method:"get",data:{},headers:{Authorization:e}}).then((function(e){if("ok"==e.data.type){var a=e.data.message;if(a.length>0){for(var n=[],c=0;c<a.length;c++){var l=a[c].is_legal-0+(a[c].is_lever-0)+(a[c].is_match-0)+(a[c].is_micro-0);l>1&&n.push(a[c])}console.log(n);var r=[];if(1==n[0].is_legal)var s={type:"legal",texts:t.$t("account.laccount")};if(1==n[0].is_micro){s={type:"micro",texts:t.$t("account.letransaction")};r.push(s)}if(1==n[0].is_lever){s={type:"lever",texts:t.$t("account.taccount")};r.push(s)}if(1==n[0].is_match){s={type:"change",texts:t.$t("usercenter.change")};r.push(s)}t.accountList=r,t.currencyList=n,console.log("账户列表",r,n),t.value1=r[0].texts,t.value2=r[1].texts,"lever"==r[0].type?t.transferBalance=n[0].wallet.lever_balance:"micro"==r[0].type?t.transferBalance=n[0].wallet.micro_balance:"change"==r[0].type?t.transferBalance=n[0].wallet.change_balance:"legal"==r[0].type&&(t.transferBalance=n[0].wallet.legal_balance),i=!0}}})).catch((function(e){console.log(e)}))},selectOne:function(e){},selectTwo:function(e){},computeBalance:function(){if(l&&i){var e=this.coins[this.coinIndex];if(!e)return;switch(this.number="",this.value1){case"legal":this.transferBalance=e.legal_balance;break;case"micro":this.transferBalance=e.micro_balance;break;case"lever":this.transferBalance=e.lever_balance;break;case"change":this.transferBalance=e.change_balance;break}}},changeCoin:function(e){this.coinIndex=e}}},s=r,o=(a("d919"),a("2877")),u=Object(o["a"])(s,n,c,!1,null,"4615ca41",null);t["default"]=u.exports},"6fff":function(e,t,a){},d919:function(e,t,a){"use strict";a("6fff")}}]);