(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c7f18ed"],{3096:function(t,e,i){"use strict";i("7ad8")},"4f3a":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap",staticStyle:{padding:"20px",background:"#FFFFFF"}},[i("div",{staticClass:"flex alcenter",staticStyle:{height:"50px"}},[i("div",{staticClass:"flex1 flex",staticStyle:{"padding-right":"15px","justify-content":"flex-end"}},[i("svg",{staticClass:"icon",staticStyle:{"font-size":"24px"},attrs:{color:"#999","aria-hidden":"true"},on:{click:function(e){return t.$router.back(-1)}}},[i("use",{attrs:{"xlink:href":"#icon-guanbi"}})])])]),i("mu-container",[i("h1",{staticStyle:{"line-height":"50px",margin:"0","margin-bottom":"30px"},attrs:{align:"left"}},[t._v(t._s(t.$t("lgpwd.setpwd")))]),t._e(),i("mu-form",{ref:"form",staticClass:"mu-demo-form",attrs:{model:t.validateForm}},[i("mu-form-item",{attrs:{label:t.$t("lpwd.oldpwd"),prop:"oldpassword"}},[i("mu-text-field",{attrs:{"action-icon":t.visibilityOld?":icon-kejian":":icon-bianzubeifenx","action-click":function(){return t.visibilityOld=!t.visibilityOld},type:t.visibilityOld?"text":"password",prop:"logpwd"},model:{value:t.validateForm.oldpassword,callback:function(e){t.$set(t.validateForm,"oldpassword",e)},expression:"validateForm.oldpassword"}})],1),i("mu-form-item",{attrs:{label:t.$t("lpwd.newpwd"),prop:"logpwd"}},[i("mu-text-field",{attrs:{"action-icon":t.visibilitylog?":icon-kejian":":icon-bianzubeifenx","action-click":function(){return t.visibilitylog=!t.visibilitylog},type:t.visibilitylog?"text":"password",prop:"logpwd"},model:{value:t.validateForm.logpwd,callback:function(e){t.$set(t.validateForm,"logpwd",e)},expression:"validateForm.logpwd"}})],1),i("mu-form-item",{attrs:{label:t.$t("register.repwd"),prop:"repwd"}},[i("mu-text-field",{attrs:{"action-icon":t.visibilityre?":icon-kejian":":icon-bianzubeifenx","action-click":function(){return t.visibilityre=!t.visibilityre},type:t.visibilityre?"text":"password",prop:"repwd"},model:{value:t.validateForm.repwd,callback:function(e){t.$set(t.validateForm,"repwd",e)},expression:"validateForm.repwd"}})],1),i("mu-button",{staticStyle:{width:"100%",height:"40px"},attrs:{color:"primary",disabled:t.disabled},on:{click:t.reset}},[t._v(t._s(t.$t("lpwd.spwd"))+" ")]),t._e()],1)],1)],1)},s=[],o=(i("d3b7"),i("797a")),l={data:function(){return{usernameRules:[{validate:function(t){return!!t},message:"必须填写用户名"},{validate:function(t){return t.length>=3},message:"用户名长度大于3"}],passwordRules:[{validate:function(t){return!!t},message:"必须填写密码"},{validate:function(t){return t.length>=3&&t.length<=10},message:"密码长度大于3小于10"}],visibility:!1,argeeRules:[{validate:function(t){return!!t},message:"必须同意用户协议"}],validateForm:{email:"",code:"",isAgree:!1,country:"China",logpwd:"",repwd:"",invitecode:"",oldpassword:""},loadingSend:!1,isSending:!1,seconds:60,country:o["a"],canNext:!0,stepOne:!0,stepTwo:!1,visibilityOld:!1,visibilitylog:!1,visibilityre:!1,accountValid:!1}},beforeCreate:function(){},computed:{disabled:function(){var t=this.validateForm,e=t.logpwd,i=t.repwd,a=t.oldpassword;return!e||!i||!a}},mounted:function(){},methods:{submit:function(){var t=this,e="user/check_email",i={email_code:this.validateForm.code};this.$http({url:"/api/"+e,method:"post",data:i}).then((function(e){"ok"==e.data.type?(t.stepTwo=!0,t.stepOne=!1):t.$toast(e.data.message)}))},clear:function(){this.$refs.form.clear(),this.validateForm={email:"",password:"",isAgree:!1}},userInfo:function(){this.$http({url:"/api/user/info",method:"get",data:{},headers:{Authorization:localStorage.getItem("token")}}).then((function(t){"ok"===t.data.type&&(localStorage.setItem("user_id",t.data.message.id),localStorage.setItem("extension_code",t.data.message.extension_code),localStorage.setItem("is_seller",t.data.message.is_seller),eventBus.$emit("seller",t.data.message.is_seller))})).catch((function(t){}))},reset:function(){var t=this,e=this.validateForm,i=e.logpwd,a=e.repwd;if(i.length<6||i.length>16)this.$toast.fail(this.$t("lay.pwdlength"));else if(a===i){var s=this.$loading();this.$http({url:"/api/set_password",method:"post",data:{account:this.validateForm.email,password:i,repassword:a,code:this.validateForm.code,oldpassword:this.validateForm.oldpassword},headers:{Authorization:localStorage.getItem("token")}}).then((function(e){s.close(),"ok"===e.data.type?(t.$toast.success(t.$t("legal.finished")),["token","user_id"].forEach((function(t){localStorage.removeItem(t)})),setTimeout((function(){t.$router.push("/login")}),2e3)):t.$toast.success(e.data.message)})).finally((function(){s.close()}))}else this.$toast.fail(this.$t("lay.twopwd"))},sendCode:function(){var t=this,e="sms_mail",i=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(i.test(this.validateForm.email)){this.loadingSend=!0;var a={user_string:this.validateForm.email,type:"forget"};a.lang=window.localStorage.getItem("lang"),this.$http({url:"/api/"+e,method:"post",data:a,headers:{not_loading:!0}}).then((function(e){if(t.loadingSend=!1,t.isSending=!0,"error"!==e.data.type){t.$toast.success(e.data.message),t.canNext=!0;var i=setInterval((function(e){t.seconds--,0===t.seconds&&(t.seconds=60,clearInterval(i),t.isSending=!1)}),1e3)}else t.isSending=!1,t.$toast.fail(e.data.message)}))}else this.$toast.fail(this.$t("register.emailnum"))}}},n=l,r=(i("3096"),i("2877")),d=Object(r["a"])(n,a,s,!1,null,"42a31d28",null);e["default"]=d.exports},"7ad8":function(t,e,i){}}]);