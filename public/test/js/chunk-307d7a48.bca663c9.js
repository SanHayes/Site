(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-307d7a48"],{"4f3a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap",staticStyle:{padding:"20px",background:"#FFFFFF"}},[a("div",{staticClass:"flex alcenter",staticStyle:{height:"50px"}},[a("div",{staticClass:"flex1 flex",staticStyle:{"padding-right":"15px","justify-content":"flex-end"}},[a("svg",{staticClass:"icon",staticStyle:{"font-size":"24px"},attrs:{color:"#999","aria-hidden":"true"},on:{click:function(t){return e.$router.back(-1)}}},[a("use",{attrs:{"xlink:href":"#icon-guanbi"}})])])]),a("mu-container",[a("h1",{staticStyle:{"line-height":"50px",margin:"0","margin-bottom":"30px"},attrs:{align:"left"}},[e._v(e._s(e.$t("login.forget")))]),e.stepOne?a("mu-form",{ref:"form",staticClass:"mu-demo-form",attrs:{model:e.validateForm}},[a("mu-form-item",{attrs:{label:e.$t("register.emailnum"),prop:"email"}},[a("mu-text-field",{attrs:{prop:"username"},model:{value:e.validateForm.email,callback:function(t){e.$set(e.validateForm,"email",t)},expression:"validateForm.email"}})],1),a("mu-form-item",{attrs:{label:e.$t("register.codenum"),prop:"password"}},[a("mu-text-field",{attrs:{type:"number",autoComplete:"new-password",prop:"code"},model:{value:e.validateForm.code,callback:function(t){e.$set(e.validateForm,"code",t)},expression:"validateForm.code"}},[a("div",{attrs:{slot:"append"},slot:"append"},[a("mu-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingSend,expression:"loadingSend"}],attrs:{flat:"",color:"primary",disabled:e.isSending,"data-mu-loading-size":"24"},on:{click:e.sendCode}},[e._v(" "+e._s(e.isSending?e.$t("resend",{number:e.seconds}):e.$t("send"))+" ")])],1)])],1),a("mu-button",{staticStyle:{width:"100%",height:"40px"},attrs:{color:"primary",disabled:0===e.validateForm.email.length||0===e.validateForm.code.length||!e.canNext},on:{click:e.submit}},[e._v(e._s(e.$t("lpwd.rpwd"))+" ")]),a("div",{staticClass:"flex",staticStyle:{height:"50px"}},[a("span",{staticClass:"flex1 flex alcenter",on:{click:function(t){return e.$router.push("/login")}}},[e._v(e._s(e.$t("register.gologin")))])])],1):e._e(),e.stepTwo?a("mu-form",{ref:"form",staticClass:"mu-demo-form",attrs:{model:e.validateForm}},[a("mu-form-item",{attrs:{label:e.$t("lpwd.newpwd"),prop:"logpwd"}},[a("mu-text-field",{attrs:{"action-icon":e.visibilitylog?":icon-kejian":":icon-bianzubeifenx","action-click":function(){return e.visibilitylog=!e.visibilitylog},type:e.visibilitylog?"text":"password",prop:"logpwd"},model:{value:e.validateForm.logpwd,callback:function(t){e.$set(e.validateForm,"logpwd",t)},expression:"validateForm.logpwd"}})],1),a("mu-form-item",{attrs:{label:e.$t("register.repwd"),prop:"repwd"}},[a("mu-text-field",{attrs:{"action-icon":e.visibilityre?":icon-kejian":":icon-bianzubeifenx","action-click":function(){return e.visibilityre=!e.visibilityre},type:e.visibilityre?"text":"password",prop:"repwd"},model:{value:e.validateForm.repwd,callback:function(t){e.$set(e.validateForm,"repwd",t)},expression:"validateForm.repwd"}})],1),a("mu-button",{staticStyle:{width:"100%",height:"40px"},attrs:{color:"primary",disabled:0===e.validateForm.email.length||0===e.validateForm.code.length||!e.canNext},on:{click:e.reset}},[e._v(e._s(e.$t("lpwd.spwd"))+" ")]),a("div",{staticClass:"flex",staticStyle:{height:"50px"}},[a("span",{staticClass:"flex1 flex alcenter",on:{click:function(t){return e.$router.push("/login")}}},[e._v(e._s(e.$t("register.gologin")))])])],1):e._e()],1)],1)},s=[],o=a("797a"),n={data:function(){return{usernameRules:[{validate:function(e){return!!e},message:"必须填写用户名"},{validate:function(e){return e.length>=3},message:"用户名长度大于3"}],passwordRules:[{validate:function(e){return!!e},message:"必须填写密码"},{validate:function(e){return e.length>=3&&e.length<=10},message:"密码长度大于3小于10"}],visibility:!1,argeeRules:[{validate:function(e){return!!e},message:"必须同意用户协议"}],validateForm:{email:"",code:"",isAgree:!1,country:"China",logpwd:"",repwd:"",invitecode:""},loadingSend:!1,isSending:!1,seconds:60,country:o["a"],canNext:!1,stepOne:!0,stepTwo:!1,visibilitylog:!1,visibilityre:!1,accountValid:!1}},beforeCreate:function(){},mounted:function(){},methods:{submit:function(){var e=this,t="user/check_email",a={email_code:this.validateForm.code};this.$http({url:"/api/"+t,method:"post",data:a}).then((function(t){"ok"==t.data.type?(e.stepTwo=!0,e.stepOne=!1):e.$toast(t.data.message)}))},clear:function(){this.$refs.form.clear(),this.validateForm={email:"",password:"",isAgree:!1}},userInfo:function(){this.$http({url:"/api/user/info",method:"get",data:{},headers:{Authorization:localStorage.getItem("token")}}).then((function(e){"ok"===e.data.type&&(localStorage.setItem("user_id",e.data.message.id),localStorage.setItem("extension_code",e.data.message.extension_code),localStorage.setItem("is_seller",e.data.message.is_seller),eventBus.$emit("seller",e.data.message.is_seller))})).catch((function(e){}))},reset:function(){var e=this.$loading(),t=this;this.$http({url:"/api/user/forget",method:"post",data:{account:this.validateForm.email,password:this.validateForm.logpwd,repassword:this.validateForm.repwd,code:this.validateForm.code}}).then((function(a){e.close(),"ok"===a.data.type?(t.$toast.success(t.$t("legal.finished")),["token","user_id"].forEach((function(e){localStorage.removeItem(e)})),setTimeout((function(){t.$router.push("/login")}),2e3)):t.$toast.success(a.data.message)}))},sendCode:function(){var e=this,t="sms_mail",a=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(a.test(this.validateForm.email)){this.loadingSend=!0;var i={user_string:this.validateForm.email,type:"forget"};i.lang=window.localStorage.getItem("lang"),this.$http({url:"/api/"+t,method:"post",data:i,headers:{not_loading:!0}}).then((function(t){if(e.loadingSend=!1,e.isSending=!0,"error"!==t.data.type){e.$toast.success(t.data.message),e.canNext=!0;var a=setInterval((function(t){e.seconds--,0===e.seconds&&(e.seconds=60,clearInterval(a),e.isSending=!1)}),1e3)}else e.isSending=!1,e.$toast.fail(t.data.message)}))}else this.$toast.fail(this.$t("register.emailnum"))}}},l=n,r=(a("edda"),a("2877")),d=Object(r["a"])(l,i,s,!1,null,"fafb92e8",null);t["default"]=d.exports},"8d25":function(e,t,a){},edda:function(e,t,a){"use strict";a("8d25")}}]);